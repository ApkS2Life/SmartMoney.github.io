<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>SmartMoney - Quản Lý Dòng Tiền</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.0/dist/sweetalert2.all.min.js" integrity="sha256-IW9RTty6djbi3+dyypxajC14pE6NavONkWUNzালেরw=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha256-e2m+7XWoEuqS4S+q++eId/uH3g+EcaJd6F+F+Z7HDpI=" crossorigin="anonymous"></script>
<style>
/* CSS Style - OK, không có lỗi */
:root{--primary-color:#007bff;--secondary-color:#6c757d;--success-color:#28a745;--danger-color:#dc3545;--warning-color:#ffc107;--info-color:#17a2b8;--light-color:#f8f9fa;--dark-color:#343a40;}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background-color:var(--light-color);color:#333;min-height:100vh;display:flex;flex-direction:column;}
.navbar{background-color:var(--primary-color);color:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
.navbar-brand,.nav-link{color:#fff;transition:color 0.3s ease;}
.navbar-brand:hover,.nav-link:hover{color:#f0f0f0;}
.container{padding:20px;flex:1;}
.card{margin-bottom:20px;border:none;box-shadow:0 4px 8px rgba(0,0,0,0.1);border-radius:10px;}
.card-header{background-color:var(--primary-color);color:#fff;font-weight:bold;border-top-left-radius:10px;border-top-right-radius:10px;padding:15px 20px;}
.card-body{padding:20px;background-color:#fff;}
.form-label{font-weight:bold;color:var(--dark-color);}
.btn-primary{background-color:var(--primary-color);border:none;padding:10px 20px;font-size:1rem;transition:background-color 0.3s ease;}
.btn-primary:hover{background-color:#0056b3;}
.btn-danger{background-color:var(--danger-color);border:none;padding:10px 20px;font-size:1rem;transition:background-color 0.3s ease;}
.btn-danger:hover{background-color:#c82333;}
.table{background-color:#fff;}
.table th{background-color:var(--light-color);color:var(--dark-color);}
.table td{color:#333;}
.table .btn{color:#fff;}
.table .btn-danger:hover{color:#fff;}
#paypal-button-container-P-5RK84510GF589494JM5X5PXY{margin-top:20px;}
footer{background-color:var(--dark-color);color:#fff;text-align:center;padding:10px 0;width:100%;margin-top:auto;}
.tab-content{padding:20px 0;}
.hidden{display:none;}
.show{display:block;}
.nav-tabs .nav-link{border:1px solid transparent;border-top-left-radius:0.25rem;border-top-right-radius:0.25rem;color:var(--primary-color);transition:all 0.3s ease;}
.nav-tabs .nav-link.active{background-color:var(--primary-color);color:#fff;border-color:var(--primary-color);}
.nav-tabs .nav-link:hover{border-color:var(--primary-color);color:var(--primary-color);}
.section-title{background-color:var(--light-color);padding:10px 15px;border-left:5px solid var(--primary-color);margin-bottom:20px;font-weight:bold;color:var(--dark-color);border-radius:5px;}
.instruction-step{margin-bottom:10px;padding-left:20px;border-left:3px solid var(--info-color);background-color:#e0f2f7;padding:10px;border-radius:5px;}
#auth-section{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,var(--primary-color) 0%,var(--info-color) 100%);}
.auth-form{width:100%;max-width:400px;padding:30px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
.auth-form h2{text-align:center;margin-bottom:20px;color:var(--primary-color);}
.auth-form .btn{width:100%;padding:10px;font-size:1rem;}
.auth-form .nav-tabs .nav-link{color:var(--primary-color);}
.auth-form .nav-tabs .nav-link.active{background-color:var(--primary-color);color:#fff;}
.auth-form .nav-tabs .nav-link:hover{color:#fff;}
.chart-container{height:400px;width:100%;}
.input-group-text{background-color:var(--primary-color);color:#fff;border:none;}
.input-group .form-control{border:1px solid var(--primary-color);}
.input-group .form-control:focus{box-shadow:0 0 0 0.25rem rgba(0,123,255,0.25);border-color:var(--primary-color);}
.form-control:focus{box-shadow:0 0 0 0.25rem rgba(0,123,255,0.25);border-color:var(--primary-color);}
.accordion-button{color:var(--dark-color);background-color:#fff;border:none;}
.accordion-button:not(.collapsed){color:var(--primary-color);background-color:#e7f1ff;}
.accordion-button:focus{box-shadow:0 0 0 0.25rem rgba(0,123,255,0.25);border-color:var(--primary-color);}
.accordion-item{border:1px solid rgba(0,0,0,0.125);}
.accordion-body ul li{list-style-type:disc;margin-left:20px;}
.table .delete-btn{background-color:var(--danger-color);border:none;padding:5px 10px;font-size:0.8rem;transition:background-color 0.3s ease;margin-right:5px;}
.table .delete-btn:hover{background-color:#c82333;color:#fff;}
.table .edit-btn{background-color:var(--info-color);border:none;padding:5px 10px;font-size:0.8rem;transition:background-color 0.3s ease;}
.table .edit-btn:hover{background-color:#138496;color:#fff;}
.card-body .row{margin-bottom:15px;}
.card-body .row .col-md-4{margin-bottom:15px;}
.modal-content{border-radius:10px;}
.modal-header{background-color:var(--primary-color);color:#fff;border-top-left-radius:10px;border-top-right-radius:10px;padding:15px 20px;}
.modal-title{font-weight:bold;}
.modal-footer .btn-secondary{background-color:var(--secondary-color);}
.modal-footer .btn-secondary:hover{background-color:#5a6268;}
@media (max-width:768px){
.container{padding:10px;}
.card-header{padding:10px 15px;}
.card-body{padding:15px;}
.section-title{padding:10px;font-size:1.2rem;}
.instruction-step{padding:10px;font-size:0.9rem;}
.auth-form{padding:20px;max-width:90%;}
.chart-container{height:300px;}
.table .delete-btn,.table .edit-btn{padding:5px;font-size:0.7rem;}
}
</style>
</head>
<body>
<div id="auth-section">
<div class="auth-form">
<h2><i class="fas fa-chart-line"></i> SmartMoney</h2>
<ul class="nav nav-tabs" id="authTabs" role="tablist">
<li class="nav-item" role="presentation">
<button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true"><i class="fas fa-sign-in-alt"></i> Đăng Nhập</button>
</li>
<li class="nav-item" role="presentation">
<button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false"><i class="fas fa-user-plus"></i> Đăng Ký</button>
</li>
</ul>
<div class="tab-content" id="authTabsContent">
<div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
<form id="loginForm">
<div class="mb-3">
<label for="loginEmail" class="form-label"><i class="fas fa-envelope"></i> Email</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-at"></i></span>
<input type="email" class="form-control" id="loginEmail" required>
</div>
</div>
<div class="mb-3">
<label for="loginPassword" class="form-label"><i class="fas fa-lock"></i> Mật Khẩu</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-key"></i></span>
<input type="password" class="form-control" id="loginPassword" required>
</div>
</div>
<button type="submit" class="btn btn-primary"><i class="fas fa-sign-in-alt"></i> Đăng Nhập</button>
</form>
</div>
<div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
<form id="registerForm">
<div class="mb-3">
<label for="registerEmail" class="form-label"><i class="fas fa-envelope"></i> Email</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-at"></i></span>
<input type="email" class="form-control" id="registerEmail" required>
</div>
</div>
<div class="mb-3">
<label for="registerPassword" class="form-label"><i class="fas fa-lock"></i> Mật Khẩu</label>
<div class="input-group">
<span class="input-group-text"><i class="fas fa-key"></i></span>
<input type="password" class="form-control" id="registerPassword" required>
</div>
</div>
<button type="submit" class="btn btn-primary"><i class="fas fa-user-plus"></i> Đăng Ký</button>
</form>
</div>
</div>
</div>
</div>
<div id="main-content" class="hidden">
<nav class="navbar navbar-expand-lg">
<div class="container-fluid">
<a class="navbar-brand" href="#"><i class="fas fa-chart-line"></i> SmartMoney</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link active" aria-current="page" href="#" data-tab="dashboard"><i class="fas fa-home"></i> Tổng Quan</a></li>
<li class="nav-item"><a class="nav-link" href="#" data-tab="income"><i class="fas fa-money-bill-wave"></i> Thu Nhập</a></li>
<li class="nav-item"><a class="nav-link" href="#" data-tab="expense"><i class="fas fa-shopping-cart"></i> Chi Tiêu</a></li>
<li class="nav-item"><a class="nav-link" href="#" data-tab="savings"><i class="fas fa-piggy-bank"></i> Tiết Kiệm</a></li>
<li class="nav-item"><a class="nav-link" href="#" data-tab="guide"><i class="fas fa-question-circle"></i> Hướng Dẫn</a></li>
<li class="nav-item"><a class="nav-link" href="#" data-tab="payment"><i class="fas fa-credit-card"></i> Thanh Toán</a></li>
<li class="nav-item"><a class="nav-link" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Đăng Xuất</a></li>
</ul>
</div>
</div>
</nav>
<div class="container mt-4">
<div id="dashboard-content" class="tab-content">
<h3 class="section-title"><i class="fas fa-chart-pie"></i> Bảng Điều Khiển</h3>
<div class="row">
<div class="col-md-6">
<div class="card">
<div class="card-header"><i class="fas fa-money-bill-wave"></i> Thu Nhập</div>
<div class="card-body" id="incomeSummary"></div>
</div>
</div>
<div class="col-md-6">
<div class="card">
<div class="card-header"><i class="fas fa-shopping-cart"></i> Chi Tiêu</div>
<div class="card-body" id="expenseSummary"></div>
</div>
</div>
</div>
<div class="row mt-4">
<div class="col-md-6">
<div class="card">
<div class="card-header"><i class="fas fa-piggy-bank"></i> Tiết Kiệm</div>
<div class="card-body" id="savingsSummary"></div>
</div>
</div>
<div class="col-md-6">
<div class="card">
<div class="card-header"><i class="fas fa-chart-line"></i> Biểu Đồ</div>
<div class="card-body">
<div class="chart-container" id="chartContainer"></div>
</div>
</div>
</div>
</div>
</div>
<div id="income-content" class="tab-content hidden">
<h3 class="section-title"><i class="fas fa-money-bill-wave"></i> Quản Lý Thu Nhập</h3>
<div class="card">
<div class="card-body">
<form id="incomeForm">
<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label for="incomeDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
<input type="date" class="form-control" id="incomeDate" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="incomeSource" class="form-label"><i class="fas fa-tag"></i> Nguồn Thu</label>
<input type="text" class="form-control" id="incomeSource" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="incomeAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
<input type="number" class="form-control" id="incomeAmount" min="0" required>
</div>
</div>
</div>
<button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> Thêm Thu Nhập</button>
</form>
</div>
</div>
<div class="card">
<div class="card-header"><i class="fas fa-list"></i> Danh Sách Thu Nhập</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped" id="incomeTable">
<thead>
<tr>
<th><i class="fas fa-calendar-alt"></i> Ngày</th>
<th><i class="fas fa-tag"></i> Nguồn Thu</th>
<th><i class="fas fa-dollar-sign"></i> Số Tiền</th>
<th><i class="fas fa-cog"></i> Thao Tác</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
</div>
<div id="expense-content" class="tab-content hidden">
<h3 class="section-title"><i class="fas fa-shopping-cart"></i> Quản Lý Chi Tiêu</h3>
<div class="card">
<div class="card-body">
<form id="expenseForm">
<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label for="expenseDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
<input type="date" class="form-control" id="expenseDate" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="expenseCategory" class="form-label"><i class="fas fa-folder-open"></i> Danh Mục</label>
<input type="text" class="form-control" id="expenseCategory" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="expenseAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
<input type="number" class="form-control" id="expenseAmount" min="0" required>
</div>
</div>
</div>
<button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> Thêm Chi Tiêu</button>
</form>
</div>
</div>
<div class="card">
<div class="card-header"><i class="fas fa-list"></i> Danh Sách Chi Tiêu</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped" id="expenseTable">
<thead>
<tr>
<th><i class="fas fa-calendar-alt"></i> Ngày</th>
<th><i class="fas fa-folder-open"></i> Danh Mục</th>
<th><i class="fas fa-dollar-sign"></i> Số Tiền</th>
<th><i class="fas fa-cog"></i> Thao Tác</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
</div>
<div id="savings-content" class="tab-content hidden">
<h3 class="section-title"><i class="fas fa-piggy-bank"></i> Quản Lý Tiết Kiệm</h3>
<div class="card">
<div class="card-body">
<form id="savingsForm">
<div class="row">
<div class="col-md-4">
<div class="mb-3">
<label for="savingsDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
<input type="date" class="form-control" id="savingsDate" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="savingsGoal" class="form-label"><i class="fas fa-bullseye"></i> Mục Tiêu</label>
<input type="text" class="form-control" id="savingsGoal" required>
</div>
</div>
<div class="col-md-4">
<div class="mb-3">
<label for="savingsAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
<input type="number" class="form-control" id="savingsAmount" min="0" required>
</div>
</div>
</div>
<button type="submit" class="btn btn-primary"><i class="fas fa-plus"></i> Thêm Khoản Tiết Kiệm</button>
</form>
</div>
</div>
<div class="card">
<div class="card-header"><i class="fas fa-list"></i> Danh Sách Tiết Kiệm</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped" id="savingsTable">
<thead>
<tr>
<th><i class="fas fa-calendar-alt"></i> Ngày</th>
<th><i class="fas fa-bullseye"></i> Mục Tiêu</th>
<th><i class="fas fa-dollar-sign"></i> Số Tiền</th>
<th><i class="fas fa-cog"></i> Thao Tác</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
</div>
<div id="guide-content" class="tab-content hidden">
<h3 class="section-title"><i class="fas fa-question-circle"></i> Hướng Dẫn Sử Dụng SmartMoney</h3>
<div class="accordion" id="guideAccordion">
<div class="accordion-item">
<h2 class="accordion-header" id="headingOne">
<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
<i class="fas fa-info-circle"></i> 1. Giới Thiệu
</button>
</h2>
<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#guideAccordion">
<div class="accordion-body">
<p>Chào mừng bạn đến với <strong>SmartMoney</strong>! Đây là công cụ giúp bạn quản lý tài chính cá nhân một cách hiệu quả, dựa trên kiến thức từ bộ sách "Dạy Con Làm Giàu".</p>
<p><strong>Các chức năng chính:</strong></p>
<ul>
<li><i class="fas fa-money-bill-wave"></i> <strong>Quản lý thu nhập:</strong> Ghi chép, theo dõi và phân tích các nguồn thu nhập của bạn.</li>
<li><i class="fas fa-shopping-cart"></i> <strong>Quản lý chi tiêu:</strong> Ghi chép, phân loại và kiểm soát chi tiêu hàng ngày.</li>
<li><i class="fas fa-piggy-bank"></i> <strong>Quản lý tiết kiệm:</strong> Đặt mục tiêu tiết kiệm và theo dõi tiến độ.</li>
<li><i class="fas fa-chart-line"></i> <strong>Báo cáo và phân tích:</strong> Cung cấp cái nhìn tổng quan về tình hình tài chính của bạn thông qua các biểu đồ và bảng tóm tắt.</li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h2 class="accordion-header" id="headingTwo">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
<i class="fas fa-book-open"></i> 2. Hướng Dẫn Sử Dụng Các Tab
</button>
</h2>
<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#guideAccordion">
<div class="accordion-body">
<div class="instruction-step">
<p><strong><i class="fas fa-home"></i> Tab Tổng Quan:</strong></p>
<ul>
<li>Xem nhanh tình hình tài chính của bạn trong tháng hiện tại.</li>
<li>Biểu đồ trực quan giúp bạn dễ dàng nắm bắt xu hướng thu chi.</li>
</ul>
</div>
<div class="instruction-step">
<p><strong><i class="fas fa-money-bill-wave"></i> Tab Thu Nhập:</strong></p>
<ul>
<li>Nhấn nút "Thêm Thu Nhập" để ghi chép các khoản thu nhập mới.</li>
<li>Điền đầy đủ thông tin vào form: Ngày, Nguồn Thu, Số Tiền.</li>
<li>Xem danh sách thu nhập theo từng tháng.</li>
</ul>
</div>
<div class="instruction-step">
<p><strong><i class="fas fa-shopping-cart"></i> Tab Chi Tiêu:</strong></p>
<ul>
<li>Nhấn nút "Thêm Chi Tiêu" để ghi chép các khoản chi tiêu.</li>
<li>Điền đầy đủ thông tin: Ngày, Danh Mục, Số Tiền.</li>
<li>Xem danh sách chi tiêu theo từng tháng và danh mục.</li>
</ul>
</div>
<div class="instruction-step">
<p><strong><i class="fas fa-piggy-bank"></i> Tab Tiết Kiệm:</strong></p>
<ul>
<li>Nhấn nút "Thêm Khoản Tiết Kiệm" để đặt mục tiêu tiết kiệm mới.</li>
<li>Điền thông tin: Ngày, Mục Tiêu, Số Tiền.</li>
<li>Theo dõi tiến độ tiết kiệm của bạn.</li>
</ul>
</div>
<div class="instruction-step">
<p><strong><i class="fas fa-credit-card"></i> Tab Thanh Toán:</strong></p>
<ul>
<li>Hướng dẫn chi tiết cách thanh toán phí thuê bao.</li>
<li>Cung cấp nút thanh toán PayPal để bạn thanh toán nhanh chóng.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="accordion-item">
<h2 class="accordion-header" id="headingThree">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
<i class="fas fa-star"></i> 3. Lợi Ích Khi Sử Dụng SmartMoney
</button>
</h2>
<div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#guideAccordion">
<div class="accordion-body">
<ul>
<li><strong><i class="fas fa-check-circle"></i> Kiểm soát tài chính:</strong> Nắm rõ tình hình thu chi, từ đó đưa ra quyết định tài chính hợp lý.</li>
<li><strong><i class="fas fa-check-circle"></i> Tiết kiệm hiệu quả:</strong> Đặt mục tiêu và theo dõi tiến độ tiết kiệm, giúp bạn đạt được mục tiêu tài chính.</li>
<li><strong><i class="fas fa-check-circle"></i> Đầu tư thông minh:</strong> Phân tích dòng tiền để có kế hoạch đầu tư hiệu quả.</li>
<li><strong><i class="fas fa-check-circle"></i> Tự do tài chính:</strong> Xây dựng nền tảng tài chính vững chắc cho tương lai.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="payment-content" class="tab-content hidden">
<h3 class="section-title"><i class="fas fa-credit-card"></i> Thanh Toán Phí Thuê Bao</h3>
<div class="card">
<div class="card-body">
<p>SmartMoney cung cấp bản dùng thử miễn phí trong <strong>148 giờ</strong>. Sau đó, bạn cần thanh toán phí thuê bao hàng tháng là <strong>5$/tháng</strong> để tiếp tục sử dụng đầy đủ chức năng.</p>
<p><strong>Hướng dẫn thanh toán:</strong></p>
<ol>
<li>Nhấn vào nút thanh toán PayPal bên dưới.</li>
<li>Đăng nhập vào tài khoản PayPal của bạn (nếu chưa có, bạn có thể tạo mới).</li>
<li>Xác nhận thanh toán.</li>
<li>Sau khi thanh toán thành công, tài khoản của bạn sẽ được nâng cấp và bạn có thể tiếp tục sử dụng SmartMoney.</li>
</ol>
<p><strong>Thanh toán bằng tài khoản ngân hàng thông qua PayPal:</strong></p>
<ol>
<li>Chọn phương thức thanh toán bằng thẻ tín dụng/ghi nợ.</li>
<li>Nhập thông tin thẻ của bạn.</li>
<li>Xác nhận thanh toán.</li>
</ol>
<p><strong>Lưu ý:</strong></p>
<ul>
<li>Bạn cần đảm bảo tài khoản PayPal hoặc thẻ ngân hàng của bạn có đủ số dư để thanh toán.</li>
<li>Chúng tôi sử dụng PayPal để đảm bảo tính bảo mật và an toàn cho giao dịch của bạn.</li>
</ul>
<div id="paypal-button-container-P-5RK84510GF589494JM5X5PXY"></div>
</div>
</div>
</div>
</div>
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="editModalLabel"><i class="fas fa-edit"></i> Chỉnh Sửa</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body" id="editModalBody"></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="fas fa-times"></i> Đóng</button>
<button type="button" class="btn btn-primary" id="saveEditBtn"><i class="fas fa-save"></i> Lưu Thay Đổi</button>
</div>
</div>
</div>
</div>
<footer>
<p>© 2023 SmartMoney - Bản quyền thuộc về Mr.Q</p>
</footer>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://www.paypal.com/sdk/js?client-id=AQqaXCHDH9pqITKze3A_k0oGXBRKUqP-9OiKAKS35hVp7Iq_XRdQSMHSPqL4xSp9z9Lj2xutlnczhOaw&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
<script>
const API_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzOuCusdHEqlKaokJbLbqsLHdmTztTuNPhbLJZI-yv9bK-Cw5R4SzL9DUT2gUyMbbF3BA/exec';
const SHEET_ID = '1kSYuQYdtGwktzfTVOAvs4yLY2VxTjTtcCUb1qSOnDno';
let currentUser = null;
const loginForm = document.getElementById('loginForm');
const registerForm = document.getElementById('registerForm');
const authSection = document.getElementById('auth-section');
const mainContent = document.getElementById('main-content');
const logoutBtn = document.getElementById('logoutBtn');
const incomeForm = document.getElementById('incomeForm');
const expenseForm = document.getElementById('expenseForm');
const savingsForm = document.getElementById('savingsForm');
const incomeTable = document.getElementById('incomeTable').querySelector('tbody');
const expenseTable = document.getElementById('expenseTable').querySelector('tbody');
const savingsTable = document.getElementById('savingsTable').querySelector('tbody');
const incomeSummary = document.getElementById('incomeSummary');
const expenseSummary = document.getElementById('expenseSummary');
const savingsSummary = document.getElementById('savingsSummary');
const tabs = document.querySelectorAll('.nav-link');
const editModal = new bootstrap.Modal(document.getElementById('editModal'));
let editItemId = null;
let editItemType = null;

// Xử lý Tab
tabs.forEach(tab => {
  tab.addEventListener('click', function(event) {
    event.preventDefault();
    tabs.forEach(tab => {
  tab.addEventListener('click', function(event) {
    event.preventDefault();
    tabs.forEach(t => t.classList.remove('active'));
    this.classList.add('active');
    const tabContents = document.querySelectorAll('.tab-content');
    tabContents.forEach(content => content.classList.add('hidden'));

    // Sửa lỗi: Kiểm tra tabId tồn tại
    const tabId = this.getAttribute('data-tab');
    if (tabId) {
      const targetContent = document.getElementById(tabId + '-content');
      if (targetContent) {
        targetContent.classList.remove('hidden');
      }
    }

    if (tabId === 'dashboard') {
      if (currentUser) {
        fetchSummaryData();
      }
    }
  });
});

function showMainContent() {
  authSection.style.display = 'none';
  mainContent.classList.remove('hidden');
  mainContent.classList.add('show');
}

function showAuthSection() {
  authSection.style.display = 'flex';
  mainContent.classList.add('hidden');
  mainContent.classList.remove('show');
}

function handleAuthResponse(response, action) {
  if (response.status === 'success') {
    currentUser = { email: response.email, expiry: response.expiry, subscriptionId: response.subscriptionId };
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    showMainContent();
    fetchSummaryData();
    fetchData('income', renderIncomeData);
    fetchData('expense', renderExpenseData);
    fetchData('savings', renderSavingsData);
    if (action === 'register') {
      Swal.fire({
        title: 'Thành công!',
        text: 'Đăng ký thành công, bạn có 148 giờ dùng thử.',
        icon: 'success',
        confirmButtonText: '<i class="fas fa-check"></i> OK'
      });
    } else if (action === 'login') {
      if (!currentUser.expiry || new Date(currentUser.expiry) < new Date()) {
        Swal.fire({
          title: 'Thông Báo',
          text: 'Tài khoản của bạn đã hết hạn sử dụng. Vui lòng gia hạn để tiếp tục sử dụng dịch vụ.',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: '<i class="fas fa-credit-card"></i> Gia Hạn Ngay',
          cancelButtonText: '<i class="fas fa-times"></i> Hủy Bỏ',
        }).then((result) => {
          if (result.isConfirmed) {
            document.querySelector('.nav-link[data-tab="payment"]').click();
          }
        });
      } else if (!currentUser.subscriptionId) {
        Swal.fire({
          title: 'Thông Báo',
          text: 'Bạn chưa đăng ký gói thuê bao. Vui lòng đăng ký để sử dụng đầy đủ chức năng.',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: '<i class="fas fa-credit-card"></i> Đăng Ký Ngay',
          cancelButtonText: '<i class="fas fa-times"></i> Hủy Bỏ',
        }).then((result) => {
          if (result.isConfirmed) {
            document.querySelector('.nav-link[data-tab="payment"]').click();
          }
        });
      }
    }
  } else {
    Swal.fire({
      title: 'Lỗi!',
      text: response.message,
      icon: 'error',
      confirmButtonText: '<i class="fas fa-times"></i> OK'
    });
  }
}

loginForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'login', email, password, sheetId: SHEET_ID })
  })
  .then(response => response.json())
  .then(data => handleAuthResponse(data, 'login'))
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi đăng nhập.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
});

registerForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const email = document.getElementById('registerEmail').value;
  const password = document.getElementById('registerPassword').value;
  fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'register', email, password, sheetId: SHEET_ID })
  })
  .then(response => response.json())
  .then(data => handleAuthResponse(data, 'register'))
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi đăng ký.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
});

logoutBtn.addEventListener('click', function() {
  localStorage.removeItem('currentUser');
  currentUser = null;
  showAuthSection();
});

function checkLoginStatus() {
  const storedUser = localStorage.getItem('currentUser');
  if (storedUser) {
    currentUser = JSON.parse(storedUser);
    showMainContent();
    fetchSummaryData();
    fetchData('income', renderIncomeData);
    fetchData('expense', renderExpenseData);
    fetchData('savings', renderSavingsData);
  } else {
    showAuthSection();
  }
}

window.onload = checkLoginStatus;

function fetchData(type, callback) {
  if (!currentUser) return;
  fetch(API_ENDPOINT + '?action=get&type=' + type + '&email=' + currentUser.email + '&sheetId=' + SHEET_ID)
  .then(response => response.json())
  .then(data => {
    if (data.status === 'success') {
      callback(data.data);
    } else {
      console.error(data.message);
      Swal.fire({title: 'Lỗi!', text: data.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi lấy dữ liệu.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
}

function renderIncomeData(data) {
  incomeTable.innerHTML = '';
  data.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${item.date}</td><td>${item.source}</td><td>${item.amount.toLocaleString()}</td><td><button class="btn btn-sm btn-info edit-btn" data-type="income" data-id="${item.id}"><i class="fas fa-edit"></i></button> <button class="btn btn-sm btn-danger delete-btn" data-type="income" data-id="${item.id}"><i class="fas fa-trash"></i></button></td>`;
    incomeTable.appendChild(row);
  });
  attachActionListeners();
}

function renderExpenseData(data) {
  expenseTable.innerHTML = '';
  data.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${item.date}</td><td>${item.category}</td><td>${item.amount.toLocaleString()}</td><td><button class="btn btn-sm btn-info edit-btn" data-type="expense" data-id="${item.id}"><i class="fas fa-edit"></i></button> <button class="btn btn-sm btn-danger delete-btn" data-type="expense" data-id="${item.id}"><i class="fas fa-trash"></i></button></td>`;
    expenseTable.appendChild(row);
  });
  attachActionListeners();
}

function renderSavingsData(data) {
  savingsTable.innerHTML = '';
  data.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${item.date}</td><td>${item.goal}</td><td>${item.amount.toLocaleString()}</td><td><button class="btn btn-sm btn-info edit-btn" data-type="savings" data-id="${item.id}"><i class="fas fa-edit"></i></button> <button class="btn btn-sm btn-danger delete-btn" data-type="savings" data-id="${item.id}"><i class="fas fa-trash"></i></button></td>`;
    savingsTable.appendChild(row);
  });
  attachActionListeners();
}

function addData(type, data, callback) {
  if (!currentUser) return;
  fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'add', type: type, data: data, email: currentUser.email, sheetId: SHEET_ID })
  })
  .then(response => response.json())
  .then(result => {
    if (result.status === 'success') {
      callback();
      Swal.fire({title: 'Thành công!', text: `Đã thêm ${type === 'income' ? 'thu nhập' : type === 'expense' ? 'chi tiêu' : 'tiết kiệm'} thành công.`, icon: 'success', confirmButtonText: '<i class="fas fa-check"></i> OK'});
    } else {
      Swal.fire({title: 'Lỗi!', text: result.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi thêm dữ liệu.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
}

incomeForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const incomeData = {
    date: document.getElementById('incomeDate').value,
    source: document.getElementById('incomeSource').value,
    amount: parseFloat(document.getElementById('incomeAmount').value)
  };
  addData('income', incomeData, () => {
    fetchData('income', renderIncomeData);
    fetchSummaryData();
  });
});

expenseForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const expenseData = {
    date: document.getElementById('expenseDate').value,
    category: document.getElementById('expenseCategory').value,
    amount: parseFloat(document.getElementById('expenseAmount').value)
  };
  addData('expense', expenseData, () => {
    fetchData('expense', renderExpenseData);
    fetchSummaryData();
  });
});

savingsForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const savingsData = {
    date: document.getElementById('savingsDate').value,
    goal: document.getElementById('savingsGoal').value,
    amount: parseFloat(document.getElementById('savingsAmount').value)
  };
  addData('savings', savingsData, () => {
    fetchData('savings', renderSavingsData);
    fetchSummaryData();
  });
});

function deleteData(type, id, callback) {
  if (!currentUser) return;
  fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'delete', type: type, id: id, email: currentUser.email, sheetId: SHEET_ID })
  })
  .then(response => response.json())
  .then(result => {
    if (result.status === 'success') {
      callback();
      Swal.fire({title: 'Đã xóa!', text: 'Dữ liệu đã được xóa.', icon: 'success', confirmButtonText: '<i class="fas fa-check"></i> OK'});
    } else {
      Swal.fire({title: 'Lỗi!', text: result.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi xóa dữ liệu.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
}

function updateData(type, id, data, callback) {
  if (!currentUser) return;
  fetch(API_ENDPOINT, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ action: 'update', type: type, id: id, data: data, email: currentUser.email, sheetId: SHEET_ID })
  })
  .then(response => response.json())
  .then(result => {
    if (result.status === 'success') {
      callback();
      Swal.fire({title: 'Thành công!', text: 'Dữ liệu đã được cập nhật.', icon: 'success', confirmButtonText: '<i class="fas fa-check"></i> OK'});
    } else {
      Swal.fire({title: 'Lỗi!', text: result.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi cập nhật dữ liệu.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
}

function attachActionListeners() {
  document.querySelectorAll('.delete-btn').forEach(button => {
    button.removeEventListener('click', handleDelete);
    button.addEventListener('click', handleDelete);
  });
  document.querySelectorAll('.edit-btn').forEach(button => {
    button.removeEventListener('click', handleEdit);
    button.addEventListener('click', handleEdit);
  });
}

function handleDelete() {
  const type = this.getAttribute('data-type');
  const id = parseInt(this.getAttribute('data-id'));
  Swal.fire({
    title: 'Bạn có chắc chắn muốn xóa?',
    text: "Bạn sẽ không thể khôi phục lại dữ liệu này!",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#d33',
    cancelButtonColor: '#3085d6',
    confirmButtonText: '<i class="fas fa-trash"></i> Xóa',
    cancelButtonText: '<i class="fas fa-times"></i> Hủy'
  }).then((result) => {
    if (result.isConfirmed) {
      deleteData(type, id, () => {
        if (type === 'income') {
          fetchData('income', renderIncomeData);
        } else if (type === 'expense') {
          fetchData('expense', renderExpenseData);
        } else if (type === 'savings') {
          fetchData('savings', renderSavingsData);
        }
        fetchSummaryData();
      });
    }
  });
}

function handleEdit() {
  const type = this.getAttribute('data-type');
  const id = parseInt(this.getAttribute('data-id'));
  editItemId = id;
  editItemType = type;
  let itemData;
  if (type === 'income') {
    itemData = incomeTable.rows[Array.from(incomeTable.querySelectorAll('.edit-btn')).indexOf(this)].cells;
  } else if (type === 'expense') {
    itemData = expenseTable.rows[Array.from(expenseTable.querySelectorAll('.edit-btn')).indexOf(this)].cells;
  } else if (type === 'savings') {
    itemData = savingsTable.rows[Array.from(savingsTable.querySelectorAll('.edit-btn')).indexOf(this)].cells;
  }
  document.getElementById('editModalLabel').innerHTML = `<i class="fas fa-edit"></i> Chỉnh Sửa ${type === 'income' ? 'Thu Nhập' : type === 'expense' ? 'Chi Tiêu' : 'Tiết Kiệm'}`;
  let editForm = '';
  if (type === 'income'){
    editForm = `
    <div class="mb-3">
    <label for="editIncomeDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
    <input type="date" class="form-control" id="editIncomeDate" value="${itemData[0].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editIncomeSource" class="form-label"><i class="fas fa-tag"></i> Nguồn Thu</label>
    <input type="text" class="form-control" id="editIncomeSource" value="${itemData[1].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editIncomeAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
    <input type="number" class="form-control" id="editIncomeAmount" value="${parseInt(itemData[2].textContent.replace(/,/g, ''))}" min="0" required>
    </div>
    `;
  } else if (type === 'expense'){
    editForm = `
    <div class="mb-3">
    <label for="editExpenseDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
    <input type="date" class="form-control" id="editExpenseDate" value="${itemData[0].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editExpenseCategory" class="form-label"><i class="fas fa-folder-open"></i> Danh Mục</label>
    <input type="text" class="form-control" id="editExpenseCategory" value="${itemData[1].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editExpenseAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
    <input type="number" class="form-control" id="editExpenseAmount" value="${parseInt(itemData[2].textContent.replace(/,/g, ''))}" min="0" required>
    </div>
    `;
  } else if (type === 'savings'){
    editForm = `
    <div class="mb-3">
    <label for="editSavingsDate" class="form-label"><i class="fas fa-calendar-alt"></i> Ngày</label>
    <input type="date" class="form-control" id="editSavingsDate" value="${itemData[0].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editSavingsGoal" class="form-label"><i class="fas fa-bullseye"></i> Mục Tiêu</label>
    <input type="text" class="form-control" id="editSavingsGoal" value="${itemData[1].textContent}" required>
    </div>
    <div class="mb-3">
    <label for="editSavingsAmount" class="form-label"><i class="fas fa-dollar-sign"></i> Số Tiền</label>
    <input type="number" class="form-control" id="editSavingsAmount" value="${parseInt(itemData[2].textContent.replace(/,/g, ''))}" min="0" required>
    </div>
    `;
  }
  document.getElementById('editModalBody').innerHTML = editForm;
  editModal.show();
}

document.getElementById('saveEditBtn').addEventListener('click', function() {
  let updatedData = {};
  if (editItemType === 'income') {
    updatedData = {
      date: document.getElementById('editIncomeDate').value,
      source: document.getElementById('editIncomeSource').value,
      amount: parseFloat(document.getElementById('editIncomeAmount').value)
    };
  } else if (editItemType === 'expense') {
    updatedData = {
      date: document.getElementById('editExpenseDate').value,
      category: document.getElementById('editExpenseCategory').value,
      amount: parseFloat(document.getElementById('editExpenseAmount').value)
    };
  } else if (editItemType === 'savings') {
    updatedData = {
      date: document.getElementById('editSavingsDate').value,
      goal: document.getElementById('editSavingsGoal').value,
      amount: parseFloat(document.getElementById('editSavingsAmount').value)
    };
  }
  updateData(editItemType, editItemId, updatedData, () => {
    if (editItemType === 'income') {
      fetchData('income', renderIncomeData);
    } else if (editItemType === 'expense') {
      fetchData('expense', renderExpenseData);
    } else if (editItemType === 'savings') {
      fetchData('savings', renderSavingsData);
    }
    fetchSummaryData();
    editModal.hide();
  });
});

function fetchSummaryData() {
  if (!currentUser) return;
  fetch(API_ENDPOINT + '?action=summary&email=' + currentUser.email + '&sheetId=' + SHEET_ID)
  .then(response => response.json())
  .then(data => {
    if (data.status === 'success') {
      incomeSummary.innerHTML = `<p><i class="fas fa-arrow-up"></i> Tổng thu nhập: <strong>${data.income.toLocaleString()}</strong></p>`;
      expenseSummary.innerHTML = `<p><i class="fas fa-arrow-down"></i> Tổng chi tiêu: <strong>${data.expense.toLocaleString()}</strong></p>`;
      savingsSummary.innerHTML = `<p><i class="fas fa-piggy-bank"></i> Tổng tiết kiệm: <strong>${data.savings.toLocaleString()}</strong></p>`;
      renderChart(data.income, data.expense, data.savings);
    } else {
      console.error(data.message);
      Swal.fire({title: 'Lỗi!', text: data.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi lấy dữ liệu tổng quan.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
  });
}

paypal.Buttons({
  style: {
    shape: 'pill',
    color: 'gold',
    layout: 'horizontal',
    label: 'subscribe'
  },
  createSubscription: function(data, actions) {
    return actions.subscription.create({
      plan_id: 'P-5RK84510GF589494JM5X5PXY'
    });
  },
  onApprove: function(data, actions) {
    if (!currentUser) return;
    fetch(API_ENDPOINT, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ action: 'updateSubscription', email: currentUser.email, subscriptionId: data.subscriptionID, sheetId: SHEET_ID })
    })
    .then(response => response.json())
    .then(result => {
      if (result.status === 'success') {
        currentUser.subscriptionId = data.subscriptionID;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        Swal.fire({title: 'Thành công!', text: 'Đăng ký thuê bao thành công.', icon: 'success', confirmButtonText: '<i class="fas fa-check"></i> OK'});
      } else {
        Swal.fire({title: 'Lỗi!', text: result.message, icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
      }
    })
    .catch(error => {
      console.error('Error:', error);
      Swal.fire({title: 'Lỗi!', text: 'Đã xảy ra lỗi khi cập nhật thông tin thuê bao.', icon: 'error', confirmButtonText: '<i class="fas fa-times"></i> OK'});
    });
  }
}).render('#paypal-button-container-P-5RK84510GF589494JM5X5PXY');

function renderChart(income, expense, savings) {
  document.getElementById('chartContainer').innerHTML = '<canvas id="myChart"></canvas>';
  const ctx = document.getElementById('myChart').getContext('2d');
  const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Thu Nhập', 'Chi Tiêu', 'Tiết Kiệm'],
      datasets: [{
        label: 'Tổng Quan',
        data: [income, expense, savings],
        backgroundColor: [
          'rgba(75, 192, 192, 0.7)',
          'rgba(255, 99, 132, 0.7)',
          'rgba(255, 206, 86, 0.7)'
        ],
        borderColor: [
          'rgba(75, 192, 192, 1)',
          'rgba(255, 99, 132, 1)',
          'rgba(255, 206, 86, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return value.toLocaleString();
            }
          }
        }
      },
      plugins: {
        tooltip: {
          callbacks: {
            label: function(context) {
              let label = context.dataset.label || '';
              if (label) {
                label += ': ';
              }
              label += context.parsed.y.toLocaleString();
              return label;
            }
          }
        }
      }
    }
  });
}
</script>
</body>
</html>
